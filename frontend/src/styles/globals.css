@tailwind base;
@tailwind components;
@tailwind utilities;

/* ═══════════════════════════════════════════════════
   BOTANICAL BRUTALIST DESIGN SYSTEM
   Structural honesty + organic warmth
   ═══════════════════════════════════════════════════ */

/* CSS Custom Properties — Light Mode (canonical expression) */
:root {
  /* Dynamic accent — hue shifted via JS (0-360) */
  --accent-hue: 258;
  --accent-sat: 30%;
  --accent-lgt: 66%;

  --accent: hsl(var(--accent-hue), var(--accent-sat), var(--accent-lgt));
  --accent-light: hsl(var(--accent-hue), 35%, 80%);
  --accent-dark: hsl(var(--accent-hue), 30%, 47%);

  /* Botanical surfaces */
  --bg-primary: #F5F0EB;
  --bg-secondary: #EDE8E3;
  --bg-tertiary: #E5E0DB;
  --bg-card: #FFFFFF;
  --bg-terminal: #1E1E1E;

  /* Text */
  --text-primary: #1B2040;
  --text-secondary: #5A607A;
  --text-muted: #8A8FA6;

  /* Brutalist structure */
  --border-color: var(--text-primary);
  --border-subtle: #C8C4BF;
  --border-weight: 2px;

  --shadow-color: var(--text-primary);
  --shadow: 4px 4px 0px var(--shadow-color);
  --shadow-sm: 3px 3px 0px var(--shadow-color);
  --radius: 2px;

  /* Status — botanical tones */
  --status-success: #4A8C5C;
  --status-warning: #C4923A;
  --status-error: #B84A4A;
  --status-info: var(--accent);

  /* Charts — accent-derived */
  --chart-1: var(--accent);
  --chart-2: hsl(calc(var(--accent-hue) + 60), 25%, 55%);
  --chart-3: hsl(calc(var(--accent-hue) + 120), 25%, 55%);
  --chart-4: hsl(calc(var(--accent-hue) + 180), 25%, 55%);
  --chart-5: hsl(calc(var(--accent-hue) + 240), 25%, 55%);
}

/* Dark Mode — mood shift, not redesign */
.dark {
  /* Accent warms up, desaturates */
  --accent-sat: 25%;
  --accent-lgt: 70%;

  /* Deep warm backgrounds — rich soil, not void */
  --bg-primary: #0a0a0b;
  --bg-secondary: #111113;
  --bg-tertiary: #1a1a2e;
  --bg-card: #141416;
  --bg-terminal: #0a0a0b;

  /* Text */
  --text-primary: #E8E4E0;
  --text-secondary: #9A9AA0;
  --text-muted: #6A6A72;

  /* Structure relaxes */
  --border-color: rgba(255, 255, 255, 0.1);
  --border-subtle: rgba(255, 255, 255, 0.06);
  --border-weight: 1px;

  --shadow-color: transparent;
  --shadow: 0 0 20px hsla(var(--accent-hue), 20%, 60%, 0.15);
  --shadow-sm: 0 0 12px hsla(var(--accent-hue), 20%, 60%, 0.1);
  --radius: 8px;

  /* Status — slightly warmer for dark bg */
  --status-success: #5CAA6E;
  --status-warning: #D4A24A;
  --status-error: #C85A5A;
}

/* ═══════════════════════════════════════════════════
   BASE LAYER
   ═══════════════════════════════════════════════════ */

@layer base {
  html {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
  }

  body {
    background: var(--bg-primary);
    color: var(--text-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    line-height: 1.6;
  }

  /* Electron window controls */
  .titlebar-drag {
    -webkit-app-region: drag;
  }

  .titlebar-no-drag {
    -webkit-app-region: no-drag;
  }

  /* Scrollbar — brutalist minimal */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--border-subtle);
    border: 1px solid var(--border-color);
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--text-secondary);
  }

  /* Selection — accent tinted */
  ::selection {
    background-color: hsla(var(--accent-hue), 35%, 66%, 0.3);
  }
}

/* ═══════════════════════════════════════════════════
   COMPONENT LAYER
   ═══════════════════════════════════════════════════ */

@layer components {

  /* ── Cards ── */
  .card {
    background: var(--bg-card);
    border: var(--border-weight) solid var(--border-color);
    box-shadow: var(--shadow-sm);
    border-radius: var(--radius);
    position: relative;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
  }

  .card:hover {
    transform: translate(2px, 2px);
    box-shadow: 1px 1px 0px var(--shadow-color);
  }

  .dark .card:hover {
    transform: translate(1px, 1px);
    box-shadow: 0 0 8px hsla(var(--accent-hue), 20%, 60%, 0.08);
  }

  .card-elevated {
    box-shadow: var(--shadow);
  }

  .card-elevated:hover {
    transform: translate(2px, 2px);
    box-shadow: 2px 2px 0px var(--shadow-color);
  }

  .dark .card-elevated:hover {
    transform: translate(1px, 1px);
    box-shadow: 0 0 12px hsla(var(--accent-hue), 20%, 60%, 0.1);
  }

  /* Card triangular corner accent */
  .card-accent::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    border-style: solid;
    border-width: 0 28px 28px 0;
    border-color: transparent var(--accent) transparent transparent;
    z-index: 1;
  }

  /* ── Buttons ── */

  /* Base button */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-family: 'JetBrains Mono', monospace;
    font-weight: 600;
    font-size: 0.85rem;
    letter-spacing: 0.03em;
    text-decoration: none;
    cursor: pointer;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
    border: var(--border-weight) solid var(--border-color);
    border-radius: var(--radius);
  }

  /* Primary — parallelogram via skewed pseudo-element (no content clipping) */
  .btn-primary {
    padding: 10px 28px;
    color: #FFFFFF;
    text-transform: uppercase;
    position: relative;
    z-index: 0;
    background: transparent;
    border-color: transparent;
    box-shadow: none;
  }

  .btn-primary::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--accent);
    border: var(--border-weight) solid var(--border-color);
    border-radius: var(--radius);
    transform: skewX(-4deg);
    box-shadow: var(--shadow-sm);
    z-index: -1;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
  }

  .btn-primary:hover::before {
    transform: skewX(-4deg) translate(2px, 2px);
    box-shadow: 1px 1px 0px var(--shadow-color);
  }

  .dark .btn-primary::before {
    transform: none;
    border-radius: var(--radius);
  }

  .dark .btn-primary:hover::before {
    transform: translate(2px, 2px);
  }

  /* Secondary — bordered rectangle */
  .btn-secondary {
    padding: 10px 24px;
    background: var(--bg-card);
    color: var(--text-primary);
    box-shadow: var(--shadow-sm);
  }

  .btn-secondary:hover {
    transform: translate(2px, 2px);
    box-shadow: 1px 1px 0px var(--shadow-color);
  }

  /* Ghost — no border, no shadow */
  .btn-ghost {
    padding: 8px 16px;
    background: transparent;
    color: var(--text-secondary);
    border: none;
    box-shadow: none;
  }

  .btn-ghost:hover {
    color: var(--text-primary);
    background: var(--bg-secondary);
  }

  /* Icon button — circular with hard border */
  .btn-icon {
    min-width: 32px;
    min-height: 32px;
    padding: 0;
    border-radius: 50%;
    background: var(--bg-card);
    box-shadow: var(--shadow-sm);
    border: var(--border-weight) solid var(--border-color);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .btn-icon:hover {
    transform: translate(1px, 1px);
    box-shadow: 1px 1px 0px var(--shadow-color);
  }

  .dark .btn-icon {
    box-shadow: var(--shadow-sm);
  }

  .dark .btn-icon:hover {
    box-shadow: 0 0 8px hsla(var(--accent-hue), 20%, 60%, 0.1);
  }

  /* CTA / Directional — rectangle with triangle arrow */
  .btn-cta {
    padding: 10px 40px 10px 24px;
    background: var(--bg-card);
    color: var(--text-primary);
    box-shadow: var(--shadow-sm);
    position: relative;
  }

  .btn-cta::after {
    content: '';
    position: absolute;
    right: 14px;
    top: 50%;
    transform: translateY(-50%);
    border-left: 8px solid var(--text-primary);
    border-top: 5px solid transparent;
    border-bottom: 5px solid transparent;
  }

  .btn-cta:hover {
    transform: translate(2px, 2px);
    box-shadow: 1px 1px 0px var(--shadow-color);
  }

  /* ── Inputs ── */
  .input {
    padding: 8px 12px;
    background: var(--bg-card);
    border: var(--border-weight) solid var(--border-color);
    border-radius: var(--radius);
    color: var(--text-primary);
    font-family: 'Inter', sans-serif;
    font-size: 0.9rem;
    transition: border-color 0.15s ease, border-width 0.15s ease;
  }

  .input::placeholder {
    color: var(--text-muted);
  }

  .input:focus {
    outline: none;
    border-color: var(--accent);
    border-width: 3px;
    padding: 7px 11px; /* compensate for thicker border */
  }

  /* ── Tags / Badges — skewed monospace ── */
  .tag {
    display: inline-flex;
    align-items: center;
    font-family: 'JetBrains Mono', monospace;
    font-weight: 600;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    padding: 3px 12px;
    background: var(--accent-light);
    border: var(--border-weight) solid var(--border-color);
    border-radius: var(--radius);
    transform: skewX(-6deg);
    color: var(--accent-dark);
  }

  .tag > * {
    display: inline-block;
    transform: skewX(6deg);
  }

  /* ── Status indicators ── */
  .status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    border: 1px solid var(--border-color);
  }

  .status-success {
    background: var(--status-success);
    border-color: var(--status-success);
  }

  .status-warning {
    background: var(--status-warning);
    border-color: var(--status-warning);
  }

  .status-error {
    background: var(--status-error);
    border-color: var(--status-error);
  }

  /* ── Menu items ── */
  .menu-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 12px 8px 16px;
    color: var(--text-secondary);
    font-family: 'Inter', sans-serif;
    font-size: 0.9rem;
    cursor: pointer;
    transition: color 0.15s ease, background 0.15s ease;
    position: relative;
  }

  .menu-item:hover {
    color: var(--text-primary);
    background: var(--bg-secondary);
  }

  /* Active — triangle pointer on left edge */
  .menu-item-active {
    color: var(--accent-dark);
    background: var(--accent-light);
  }

  .menu-item-active::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    border-top: 6px solid transparent;
    border-bottom: 6px solid transparent;
    border-left: 8px solid var(--accent);
  }

  .dark .menu-item-active {
    background: hsla(var(--accent-hue), 20%, 40%, 0.15);
  }

  /* ── Progress bar with triangular end cap ── */
  .progress-bar {
    width: 100%;
    height: 12px;
    background: var(--bg-secondary);
    border: var(--border-weight) solid var(--border-color);
    border-radius: var(--radius);
    overflow: visible;
    position: relative;
  }

  .progress-fill {
    height: 100%;
    background: var(--accent);
    position: relative;
    transition: width 0.3s ease;
  }

  .progress-fill::after {
    content: '';
    position: absolute;
    right: -6px;
    top: 0;
    width: 0;
    height: 0;
    border-top: 6px solid transparent;
    border-bottom: 6px solid transparent;
    border-left: 6px solid var(--accent);
  }

  /* ── Section divider — zigzag ── */
  .section-divider {
    width: 100%;
    height: 8px;
    background: var(--border-color);
    clip-path: polygon(
      0% 100%, 1.5% 0%, 3% 100%, 4.5% 0%, 6% 100%, 7.5% 0%, 9% 100%, 10.5% 0%,
      12% 100%, 13.5% 0%, 15% 100%, 16.5% 0%, 18% 100%, 19.5% 0%, 21% 100%, 22.5% 0%,
      24% 100%, 25.5% 0%, 27% 100%, 28.5% 0%, 30% 100%, 31.5% 0%, 33% 100%, 34.5% 0%,
      36% 100%, 37.5% 0%, 39% 100%, 40.5% 0%, 42% 100%, 43.5% 0%, 45% 100%, 46.5% 0%,
      48% 100%, 49.5% 0%, 51% 100%, 52.5% 0%, 54% 100%, 55.5% 0%, 57% 100%, 58.5% 0%,
      60% 100%, 61.5% 0%, 63% 100%, 64.5% 0%, 66% 100%, 67.5% 0%, 69% 100%, 70.5% 0%,
      72% 100%, 73.5% 0%, 75% 100%, 76.5% 0%, 78% 100%, 79.5% 0%, 81% 100%, 82.5% 0%,
      84% 100%, 85.5% 0%, 87% 100%, 88.5% 0%, 90% 100%, 91.5% 0%, 93% 100%, 94.5% 0%,
      96% 100%, 97.5% 0%, 100% 100%
    );
    opacity: 0.15;
  }

  .dark .section-divider {
    background: var(--text-secondary);
    opacity: 0.08;
  }

  /* ── Terminal blocks ── */
  .terminal-chrome {
    background: var(--bg-terminal);
    border: var(--border-weight) solid var(--border-color);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    overflow: hidden;
  }

  .terminal-header {
    background: #2A2A2A;
    padding: 10px 14px;
    display: flex;
    align-items: center;
    gap: 8px;
    border-bottom: var(--border-weight) solid var(--border-color);
  }

  .terminal-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 2px solid;
  }

  .terminal-dot-red {
    background: #ff5f56;
    border-color: #e0443e;
  }

  .terminal-dot-yellow {
    background: #ffbd2e;
    border-color: #dea123;
  }

  .terminal-dot-green {
    background: #27c93f;
    border-color: #1aab29;
  }

  .terminal-prompt {
    color: var(--accent);
  }

  /* ── Quality indicators — triangular ── */
  .quality-gold::before {
    content: '';
    display: inline-block;
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 8px solid var(--status-success);
    margin-right: 6px;
  }

  .quality-failed::before {
    content: '';
    display: inline-block;
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 8px solid var(--status-error);
    margin-right: 6px;
  }

  .quality-pending::before {
    content: '';
    display: inline-block;
    width: 8px;
    height: 2px;
    background: var(--text-muted);
    margin-right: 6px;
    vertical-align: middle;
  }
}

/* ═══════════════════════════════════════════════════
   UTILITY LAYER
   ═══════════════════════════════════════════════════ */

@layer utilities {
  /* Typography helpers */
  .font-brand {
    font-family: 'Cormorant Garamond', Georgia, serif;
  }

  .font-body {
    font-family: 'Inter', sans-serif;
  }

  .font-code {
    font-family: 'JetBrains Mono', 'Consolas', monospace;
  }

  .text-balance {
    text-wrap: balance;
  }

  /* Gradient text — accent-based */
  .gradient-text {
    background: linear-gradient(135deg, var(--accent), var(--accent-dark));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Hide scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Transition */
  .transition-theme {
    transition: color 0.15s ease, background-color 0.15s ease, border-color 0.15s ease;
  }

  .transition-press {
    transition: transform 0.15s ease, box-shadow 0.15s ease;
  }

  /* Press-in hover helper */
  .hover-press:hover {
    transform: translate(2px, 2px);
  }

  .dark .hover-press:hover {
    transform: translate(1px, 1px);
  }
}

/* ═══════════════════════════════════════════════════
   EXTERNAL OVERRIDES
   ═══════════════════════════════════════════════════ */

/* xterm.js */
.xterm {
  padding: 8px;
}

.xterm-viewport {
  overflow-y: auto !important;
}

/* Recharts — accent-derived colors */
.recharts-cartesian-grid-horizontal line,
.recharts-cartesian-grid-vertical line {
  stroke: var(--border-subtle);
}

.recharts-text {
  fill: var(--text-secondary);
  font-family: 'JetBrains Mono', monospace;
  font-size: 11px;
}

.recharts-tooltip-wrapper {
  outline: none;
}

/* ═══════════════════════════════════════════════════
   ANIMATIONS
   ═══════════════════════════════════════════════════ */

/* Flywheel rotation */
@keyframes flywheel-rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.flywheel-animate {
  animation: flywheel-rotate 20s linear infinite;
}

/* Float animation for hero elements */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

/* Scroll reveal */
.reveal {
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.6s ease;
}

.reveal.active {
  opacity: 1;
  transform: translateY(0);
}

/* ═══════════════════════════════════════════════════
   ACCENT HUE SLIDER STYLES
   ═══════════════════════════════════════════════════ */

/* Rainbow gradient slider track */
.hue-slider {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 16px;
  border: var(--border-weight) solid var(--border-color);
  border-radius: var(--radius);
  background: linear-gradient(
    to right,
    hsl(0, 30%, 66%),
    hsl(60, 30%, 66%),
    hsl(120, 30%, 66%),
    hsl(180, 30%, 66%),
    hsl(240, 30%, 66%),
    hsl(300, 30%, 66%),
    hsl(360, 30%, 66%)
  );
  outline: none;
  cursor: pointer;
}

/* Diamond thumb */
.hue-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 16px;
  height: 16px;
  background: var(--bg-card);
  border: 2px solid var(--text-primary);
  transform: rotate(45deg);
  cursor: pointer;
}

.hue-slider::-moz-range-thumb {
  width: 16px;
  height: 16px;
  background: var(--bg-card);
  border: 2px solid var(--text-primary);
  transform: rotate(45deg);
  cursor: pointer;
  border-radius: 0;
}

/* Terminal attention states — adapted for botanical */
.terminal-attention-success {
  outline: 2px solid var(--status-success);
  outline-offset: -2px;
}

.terminal-attention-error {
  outline: 2px solid var(--status-error);
  outline-offset: -2px;
}

.terminal-attention-waiting {
  outline: 2px solid var(--accent);
  outline-offset: -2px;
  animation: attention-pulse 2s ease-in-out infinite;
}

@keyframes attention-pulse {
  0%, 100% { outline-color: var(--accent); }
  50% { outline-color: transparent; }
}
